---
title: '[Cosmos] Ignite CLI Tutorial (2)'
date: '2024-01-15'
lastmod: '2024-01-15'
tags: ['Cosmos', 'Ignite', Cosmos SDK]
draft: false
summary: 'Ignite CLI Tutorialì— ëŒ€í•œ ë‘ ë²ˆì§¸ ë‚´ìš© ì‹¤ìŠµ ë° ì •ë¦¬ ê¸€ì…ë‹ˆë‹¤.'
images: ['/static/images/thumbnail/ignite.png']
canonicalUrl: 'https://min71.dev/posts/ignite-blog-in-depth-tutorial/'
---

![ignite](/static/images/thumbnail/ignite.png)

# Blog In Depth Intro

í•´ë‹¹ ê²Œì‹œê¸€ì€ Ignite CLI Tutorialì— ëŒ€í•œ ë‘ ë²ˆì§¸ ë‚´ìš© ì‹¤ìŠµ ë° ì •ë¦¬ ê¸€ì…ë‹ˆë‹¤.

ì´ íŠœí† ë¦¬ì–¼ì—ì„œëŠ” ì²˜ìŒë¶€í„° Ignite CLIë¥¼ ì‚¬ìš©í•˜ì—¬ ë¸”ë¡œê·¸ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ Cosmos SDK ë¸”ë¡ì²´ì¸ìœ¼ë¡œ ìƒì„±í•˜ëŠ” ë°©ë²•ì„ ë°°ì›ë‹ˆë‹¤.

í•„ìš”í•œ ìœ í˜•, ë©”ì‹œì§€ ë° ì¿¼ë¦¬ë¥¼ ì„¤ì •í•˜ê³  ë¸”ë¡ì²´ì¸ì—ì„œ ë¸”ë¡œê·¸ ê²Œì‹œë¬¼ì„ ìƒì„±, ì½ê¸°, ì—…ë°ì´íŠ¸ ë° ì‚­ì œí•˜ëŠ” ë¡œì§ì„ ì§ì ‘ ì‘ì„±í•©ë‹ˆë‹¤.

êµ¬ì¶•í•  ê¸°ëŠ¥ì€ ì´ì „ ê²Œì‹œë¬¼ê³¼ ê°™ì§€ë§Œ í•´ë‹¹ í”„ë¡œì„¸ìŠ¤ì˜ ì´í•´ë„ ì¦ì§„ì„ ìœ„í•´ì„œ ìˆ˜ë™ìœ¼ë¡œ ì§ì ‘ ì‘ì—…í•  ì˜ˆì •ì…ë‹ˆë‹¤.

ê° ì½”ë“œì— ëŒ€í•œ ì„¤ëª…ì€ í•´ë‹¹ ì½”ë“œê°€ í¬í•¨ëœ íŒŒì¼ì— ì£¼ì„ìœ¼ë¡œ ì‘ì„±í–ˆìŠµë‹ˆë‹¤.

---

# Creating the Structure

## Create Project

### 1. í”„ë¡œì íŠ¸ ìƒì„±

ë¨¼ì € í”„ë¡œì íŠ¸ë¥¼ ìƒì„±í•œ í›„ ì´ë™í•©ë‹ˆë‹¤.

```bash
ignite scaffold chain blog
cd blog
```

### 2. ê²Œì‹œë¬¼ íƒ€ì… ìƒì„±

í”„ë¡œì íŠ¸ ë¸”ë¡œê·¸ì— í•„ìš”í•œ ê²Œì‹œë¬¼ì˜ íƒ€ì…ì„ ì„ ì–¸í•©ë‹ˆë‹¤
ë‹¤ìŒ ëª…ë ¹ì–´ë¥¼ ì´ìš©í•˜ì—¬ ì œëª©, ë³¸ë¬¸, ì‘ì„±ì, ID í•„ë“œê°€ ìˆëŠ” ê²Œì‹œë¬¼ì„ ìƒì„±í•©ë‹ˆë‹¤.

```bash
ignite scaffold type post title body creator id:uint
```

### 3. ê²Œì‹œë¬¼ CRUD ìƒì„±

ë‹¤ìŒìœ¼ë¡œ ë¸”ë¡œê·¸ ê²Œì‹œë¬¼ì— ëŒ€í•œ CRUDë¥¼ ìƒì„±í•©ë‹ˆë‹¤.
ì½ê¸° ì‘ì—…ì„ ì œì™¸í•œ ìƒì„±, ì—…ë°ì´íŠ¸ ë° ì‚­ì œëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ìƒíƒœë¥¼ ë³€ê²½í•©ë‹ˆë‹¤. ê·¸ëŸ¬ë¯€ë¡œ Cosmos SDK ë¸”ë¡ì²´ì¸ì—ì„œëŠ” ìƒíƒœì „í™˜ì„ íŠ¸ë¦¬ê±°í•˜ëŠ” messageê°€ í¬í•¨ëœ íŠ¸ëœì­ì…˜ì„ ë¸Œë¡œë“œìºìŠ¤íŠ¸í•´ì•¼í•©ë‹ˆë‹¤.

**Create**

ë¨¼ì € ë‹¤ìŒ ëª…ë ¹ì–´ë¡œ ì œëª©ê³¼ ë³¸ë¬¸ì„ ì´ìš©í•œ create post ë©”ì„¸ì§€ë¥¼ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```bash
ignite scaffold message create-post title body --response id:uint
```

> `--response` í”Œë˜ê·¸ë¥¼ ì´ìš©í•´ì„œ ì‘ë‹µê°’ì„ ë°˜í™˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

**Update**

ê²Œì‹œë¬¼ì„ ì—…ë°ì´íŠ¸í•˜ê¸° ìœ„í•´ì„œ id, ì œëª©, ë³¸ë¬¸ì„ ë°›ëŠ” ë©”ì„¸ì§€ë¥¼ ìƒì„±í•˜ëŠ” ëª…ë ¹ì–´ëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.

```bash
ignite scaffold message update-post title body id:uint
```

**Delete**

ê²Œì‹œë¬¼ì˜ idë¥¼ ë°›ì•„ì„œ ì‚­ì œë¥¼ ìˆ˜í–‰í•˜ëŠ” ë©”ì„¸ì§€ë¥¼ ìƒì„±í•˜ëŠ” ëª…ë ¹ì–´ëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.

```bash
ignite scaffold message delete-post id:uint
```

### 4. Query ìƒì„±

ì¿¼ë¦¬ë¥¼ í†µí•´ ì‚¬ìš©ìëŠ” ë¸”ë¡ì²´ì¸ ìƒíƒœì—ì„œ ì •ë³´ë¥¼ ê²€ìƒ‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. í•´ë‹¹ í”„ë¡œì íŠ¸ì—ì„œëŠ” `ê²Œì‹œë¬¼ ìƒì„¸ ì¡°íšŒ`, `ê²Œì‹œë¬¼ ì „ì²´ ì¡°íšŒ`ë¼ëŠ” ë‘ ê°€ì§€ ì¿¼ë¦¬ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.

**ê²Œì‹œë¬¼ ìƒì„¸ ì¡°íšŒ**

ê²Œì‹œë¬¼ì˜ Idë¥¼ ë°›ì•„ í•´ë‹¹ ê²Œì‹œê¸€ì„ ë°˜í™˜í•˜ëŠ” ì¿¼ë¦¬ëŠ” ë‹¤ìŒ ëª…ë ¹ì–´ë¡œ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```bash
ignite scaffold query show-post id:uint --response post:Post
```

**ê²Œì‹œë¬¼ ì „ì²´ ì¡°íšŒ**

ì „ì²´ ê²Œì‹œë¬¼ì„ ì¡°íšŒí•˜ëŠ” ì¿¼ë¦¬ëŠ” ë‹¤ìŒ ëª…ë ¹ì–´ë¡œ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```
ignite scaffold query list-post --response post:Post --paginated
```

> `--paginated` í”Œë˜ê·¸ë¥¼ ì´ìš©í•´ì„œ ì‚¬ìš©ìê°€ í•œ ë²ˆì— íŠ¹ì • ê²°ê³¼ í˜ì´ì§€ë¥¼ ê²€ìƒ‰í•  ìˆ˜ ìˆë„ë¡ ì¿¼ë¦¬ê°€ í˜ì´ì§€ í¬í•¨í•œ ê²°ê³¼ë¥¼ ë°˜í™˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

---

# Create Post

í•´ë‹¹ ì±•í„°ì—ì„œëŠ” ê²Œì‹œë¬¼ì„ ìƒì„±í•˜ëŠ” ë©”ì‹œì§€ë¥¼ ì²˜ë¦¬í•˜ëŠ” ê³¼ì •ì—ì„œ Keeper Methodë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. Keeper MethodëŠ” Cosmos SDKì—ì„œ ë¸”ë¡ì²´ì¸ê³¼ ìƒí˜¸ ì‘ìš©í•˜ë©° ë©”ì‹œì§€ì— ì œê³µëœ íŒŒë¼ë¯¸í„°ì— ë”°ë¼ ìƒíƒœë¥¼ ìˆ˜ì •í•˜ëŠ” ì¼ì„ ë‹´ë‹¹í•©ë‹ˆë‹¤.

`create post`ë©”ì‹œì§€ê°€ ìˆ˜ì‹ ë˜ë©´ í•´ë‹¹ Keeper Methodê°€ í˜¸ì¶œë˜ë©° ë©”ì‹œì§€ë¥¼ ì¸ìˆ˜ë¡œ ì „ë‹¬í•©ë‹ˆë‹¤. ê·¸ í›„ ì €ì¥ì†Œ ê°ì²´ê°€ ì œê³µí•˜ëŠ” ë‹¤ì–‘í•œ getter, setter ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ì—¬ ë©”ì‹œì§€ë¥¼ íš¨ê³¼ì ìœ¼ë¡œ ì²˜ë¦¬í•˜ê³  ë¸”ë¡ì²´ì¸ì— í•„ìš”í•œ ì—…ë°ì´íŠ¸ë¥¼ ìˆ˜í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

Keeper Methodì— êµ¬í˜„ëœ ë…¼ë¦¬ì™€ ë³„ë„ë¡œ ìœ ì§€í•˜ê¸° ìœ„í•´ `post.go`ë¥¼ ë§Œë“­ë‹ˆë‹¤. í•´ë‹¹ íŒŒì¼ì—ëŠ” ë¸”ë¡ì²´ì¸ ë‚´ ê²Œì‹œë¬¼ ìƒì„± ë° ê´€ë¦¬ì™€ ê´€ë ¨ëœ ì‘ì—…ì„ ì²˜ë¦¬í•˜ë„ë¡ êµ¬ì„±í•©ë‹ˆë‹¤.

## AppendPost

```go
// x/blog/keeper/post.go
package keeper

import (
    "encoding/binary"

    "blog/x/blog/types"

    "cosmossdk.io/store/prefix"
    "github.com/cosmos/cosmos-sdk/runtime"
    sdk "github.com/cosmos/cosmos-sdk/types"
)

func (k Keeper) AppendPost(ctx sdk.Context, post types.Post) uint64 {
	// í˜„ì¬ ê²Œì‹œë¬¼ ìˆ˜ë¥¼ ê²€ìƒ‰
    count := k.GetPostCount(ctx)
    // post.Idì— ì‹ë³„ì í• ë‹¹
    post.Id = count
    // KeeperStoreì— ì €ì¥ í›„ ë¦¬í„´ ë°›ì€ ê°’ì„ KVStoreAdapter íƒ€ì… ìºìŠ¤íŒ…
    storeAdapter := runtime.KVStoreAdapter(k.storeService.OpenKVStore(ctx))
    // types.PostKeyë¥¼ prefixë¡œ ì‚¬ìš©í•˜ëŠ” Store ìƒì„±
    store := prefix.NewStore(storeAdapter, types.KeyPrefix(types.PostKey))
    // byte sliceë¡œ ì¸ì½”ë”©
    appendedValue := k.cdc.MustMarshal(&post)
    // appendedValueë¥¼ Storeì— ì €ì¥
    store.Set(GetPostIDBytes(post.Id), appendedValue)
    // Keeperì˜ ì „ì²´ ê²Œì‹œë¬¼ count ì—…ë°ì´íŠ¸
    k.SetPostCount(ctx, count+1)
    // ì´ì „ countê°’ ë¦¬í„´
    return count
}
```

ìœ„ì˜ ì½”ë“œëŠ” Keeper Typeì— ì†í•˜ëŠ” `AppendPost`ë¼ëŠ” í•¨ìˆ˜ë¥¼ ì •ì˜í•©ë‹ˆë‹¤.
`AppendPost` í•¨ìˆ˜ëŠ” Contextì™€ Post Objectë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.
Context ObjectëŠ” Cosmos SDKì˜ í˜„ì¬ ë¸”ë¡ heightì— ëŒ€í•œ ìƒíƒœ Contextì •ë³´ë¥¼ ë°›ì•„ì˜¤ëŠ”ë° ì‚¬ìš©í•˜ë©°, Post ObjectëŠ” ë¸”ë¡ì²´ì¸ì— ì¶”ê°€ë  ê²Œì‹œë¬¼ë¡œ ì‚¬ìš©í•©ë‹ˆë‹¤.
`AppendPost`ëŠ” í˜„ì¬ ê²Œì‹œë¬¼ ìˆ˜ë¥¼ ê²€ìƒ‰ í›„ id í•„ë“œì— countê°’ì„ í• ë‹¹í•˜ëŠ” ê²ƒìœ¼ë¡œ ì‹œì‘í•˜ë©° `SetPostCount`ë¥¼ ì´ìš©í•´ì„œ ë¸”ë¡ì²´ì¸ì— ì €ì¥í•˜ëŠ” ê²ƒìœ¼ë¡œ í•¨ìˆ˜ëŠ” ì¢…ë£Œ ë©ë‹ˆë‹¤.
`AppendPost`ì— ëŒ€í•œ êµ¬í˜„ì„ ìœ„í•´ ë‹¤ìŒ ì½”ë“œë“¤ì´ ì¶”ê°€ë˜ì–´ì•¼ í•©ë‹ˆë‹¤.

- DBì—ì„œ ê²Œì‹œë¬¼ì„ ì €ì¥í•˜ê³  ê²€ìƒˆí•˜ëŠ”ë° ì‚¬ìš©í•  **PostKey ì •ì˜**
- DBì— ì €ì¥ëœ í˜„ì¬ ê²Œì‹œë¬¼ ìˆ˜ë¥¼ ê²€ìƒ‰í•  **GetPostCount êµ¬í˜„**
- ê²Œì‹œë¬¼ Idë¥¼ byte sliceë¡œ ë°˜í™˜í•˜ëŠ” **GetPostIDBytes êµ¬í˜„**
- DBì— ì €ì¥ëœ ê²Œì‹œë¬¼ ìˆ˜ë¥¼ ì—…ë°ì´íŠ¸í•˜ëŠ” **SetPostCount êµ¬í˜„**

## Post Key

```go
// x/blog/types/keys.go
const (
    PostKey = "Post/value/"
)
const (
    PostCountKey = "Post/count/"
)
```

í•´ë‹¹ ê²½ë¡œì˜ `keys.go`ì— **PostKey**ì™€ **PostCountKey** Prefixë¥¼ ì •ì˜í•©ë‹ˆë‹¤.

**PostKey**ëŠ” ê° ê²Œì‹œë¬¼ì— ëŒ€í•œ í‚¤ì˜ ì‹œì‘ë¶€ë¶„ìœ¼ë¡œ ê³ ìœ  ì‹ë³„ìë¥¼ ë§Œë“¤ ë•Œ ì‚¬ìš©ë˜ë©°, **PostCountKey**ëŠ” Storeì— ìµœê·¼ ì¶”ê°€ëœ ê²Œì‹œë¬¼ì˜ IDë¥¼ ì¶”ì í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤

## GetPostCount

```go
// x/blog/keeper/post.go
func (k Keeper) GetPostCount(ctx sdk.Context) uint64 {
	// í˜„ì¬ Contextì— ëŒ€í•œ KVStoreë¥¼ ì—´ì–´ì„œ KVStoreAdapter íƒ€ì…ìœ¼ë¡œ ë°˜í™˜
    storeAdapter := runtime.KVStoreAdapter(k.storeService.OpenK VStore(ctx))
    // storeAdapterë¥¼ ì´ìš©í•´ì„œ Storeìƒì„±
    store := prefix.NewStore(storeAdapter, []byte{})
    // types.PostCountKeyë¥¼ Prefixë¡œ ìƒì„±
    byteKey := types.KeyPrefix(types.PostCountKey)
    //ìƒì„±ëœ í‚¤ byteKeyë¥¼ ì‚¬ìš©í•˜ì—¬ storeì—ì„œ í˜„ì¬ ê²Œì‹œë¬¼ ìˆ˜ì— ëŒ€í•œ ë°ì´í„°ë¥¼ ì¡°íšŒ
    bz := store.Get(byteKey)
    // bzê°€ ì—†ì„ ê²½ìš° 0 ë°˜í™˜
    if bz == nil {
        return 0
    }
    // bzê°€ ìˆì„ ê²½ìš° uint64ë¡œ ë³€í™˜í•´ì„œ ë°˜í™˜
    return binary.BigEndian.Uint64(bz)
}
```

ìœ„ì˜ ì½”ë“œëŠ” Keeper Structì— ì†í•˜ëŠ” `GetPostCount`ë¼ëŠ” í•¨ìˆ˜ë¥¼ ì •ì˜í•©ë‹ˆë‹¤.
ì´ í•¨ìˆ˜ëŠ” ë‹¨ì¼ ì¸ìˆ˜ì¸ sdk.Context ìœ í˜•ì˜ ì»¨í…ìŠ¤íŠ¸ ê°ì²´ ctxë¥¼ ì‚¬ìš©í•˜ê³  uint64 ìœ í˜•ì˜ ê°’ì„ ë°˜í™˜í•©ë‹ˆë‹¤.  
GetPostCount í•¨ìˆ˜ëŠ” uint64 ê°’ìœ¼ë¡œ í‘œì‹œë˜ëŠ” í‚¤-ê°’ ì €ì¥ì†Œì— ì €ì¥ëœ ì´ ê²Œì‹œë¬¼ ìˆ˜ë¥¼ ê²€ìƒ‰í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤.

## PostIDBytes

```go
// x/blog/keeper/post.go
func GetPostIDBytes(id uint64) []byte {
	// 8byte ê¸¸ì´ì˜ byte slice ìƒì„±
    bz := make([]byte, 8)
    // uint64 íƒ€ì…ì˜ idë¥¼ bzì— ì €ì¥
    binary.BigEndian.PutUint64(bz, id)
    return bz
}
```

`GetPostIDBytes`ëŠ” uint64 ìœ í˜•ì˜ ê°’ idë¥¼ ê°€ì ¸ì™€ []byte ìœ í˜•ì˜ ê°’ì„ ë°˜í™˜í•©ë‹ˆë‹¤.

ì´ í•¨ìˆ˜ëŠ” makeë¥¼ ì‚¬ìš©í•´ì„œ ê¸¸ì´ê°€ 8ì¸ byte sliceë¥¼ ë§Œë“  í›„ idê°’ì„ uint64ë¡œ ì €ì¥ í›„ ë°˜í™˜í•©ë‹ˆë‹¤.
í•´ë‹¹ ë°˜í™˜ê°’ì€ Storeì—ì„œ í‚¤ë¡œ ì‚¬ìš©í•©ë‹ˆë‹¤.

## SetPostCount

```go
// x/blog/keeper/post.go
func (k Keeper) SetPostCount(ctx sdk.Context, count uint64) {
	// í˜„ì¬ Contextì— ëŒ€í•œ KVStoreë¥¼ ì—´ì–´ì„œ KVStoreAdapter íƒ€ì…ìœ¼ë¡œ ë°˜í™˜
    storeAdapter := runtime.KVStoreAdapter(k.storeService.OpenKVStore(ctx))
    // storeAdapterë¥¼ ì´ìš©í•´ì„œ Storeìƒì„±
    store := prefix.NewStore(storeAdapter, []byte{})
    // ê²Œì‹œë¬¼ ìˆ˜ ì €ì¥ì„ ìœ„í•œ types.PostCountKeyë¥¼ byte sliceë¡œ ë³€í™˜
    byteKey := types.KeyPrefix(types.PostCountKey)
    // 8byte ê¸¸ì´ì˜ byte slice ìƒì„±
    bz := make([]byte, 8)
    // uint64íƒ€ì…ì˜ countë¥¼ bzì— ì €ì¥
    binary.BigEndian.PutUint64(bz, count)
    // byteKeyì™€ ì¸ì½”ë”©ëœ ë°ì´í„° bzë¥¼ ì‚¬ìš©í•˜ì—¬ storeì— ì €ì¥
    store.Set(byteKey, bz)
}
```

`SetPostCount` í•¨ìˆ˜ëŠ” sdk.Context ìœ í˜•ì˜ ì»¨í…ìŠ¤íŠ¸ ctxì™€ uint64 ìœ í˜•ì˜ ê°’ ê°œìˆ˜ë¥¼ ì‚¬ìš©í•˜ê³  ê°’ì„ ë°˜í™˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.

## Create Post Message

```go
// x/blog/keeper/msg_server_create_post.go
package keeper

import (
    "context"

    "blog/x/blog/types"

    sdk "github.com/cosmos/cosmos-sdk/types"
)

func (k msgServer) CreatePost(goCtx context.Context, msg *types.MsgCreatePost) (*types.MsgCreatePostResponse, error) {
	// Go Context -> Cosmos SDK Context
    ctx := sdk.UnwrapSDKContext(goCtx)
    // Post ì¸ìŠ¤í„´ìŠ¤ ìƒì„±
    var post = types.Post{
        Creator: msg.Creator,
        Title:   msg.Title,
        Body:    msg.Body,
    }
    // post ì¶”ê°€ ë° ê²Œì‹œë¬¼ì˜ id ë°˜í™˜
    id := k.AppendPost(
        ctx,
        post,
    )
    return &types.MsgCreatePostResponse{
        Id: id,
    }, nil
}
```

`CreatePost` í•¨ìˆ˜ëŠ” MsgCreatePost ë©”ì‹œì§€ ìœ í˜•ì— ëŒ€í•œ message handlerì…ë‹ˆë‹¤.
MsgCreatePost ë©”ì‹œì§€ì— ì œê³µëœ ì •ë³´ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ë¸”ë¡ì²´ì¸ì— ìƒˆ ê²Œì‹œë¬¼ì„ ìƒì„±í•˜ëŠ” ì—­í• ì„ ë‹´ë‹¹í•©ë‹ˆë‹¤.

---

# Update Post

í•´ë‹¹ ì±•í„°ì—ì„œëŠ” ê²Œì‹œë¬¼ì„ ì—…ë°ì´íŠ¸í•˜ëŠ” í”„ë¡œì„¸ìŠ¤ë¥¼ ì•Œì•„ë´…ë‹ˆë‹¤.
ê²Œì‹œë¬¼ì„ ì—…ë°ì´íŠ¸í•˜ê¸° ìœ„í•´ì„œëŠ” ê²Œì‹œë¬¼ì„ ì¡°íšŒ í›„ ë‹¤ì‹œ ì €ì¥í•˜ëŠ” ë¡œì§ì´ í•„ìš”í•˜ë¯€ë¡œ í•´ë‹¹ ë¡œì§ì— ëŒ€í•´ ì•Œì•„ë´…ë‹ˆë‹¤!

## Getting Post

```go
// x/blog/keeper/post.go
func (k Keeper) GetPost(ctx sdk.Context, id uint64) (val types.Post, found bool) {
	// í˜„ì¬ Contextì— ëŒ€í•œ KVStoreë¥¼ ì—´ì–´ì„œ KVStoreAdapter íƒ€ì…ìœ¼ë¡œ ë°˜í™˜
    storeAdapter := runtime.KVStoreAdapter(k.storeService.OpenKVStore(ctx))
	// storeAdapterì™€ PostKey Prefixë¥¼ ì´ìš©í•´ì„œ Storeìƒì„±
    store := prefix.NewStore(storeAdapter, types.KeyPrefix(types.PostKey))
    // ê²Œì‹œë¬¼ ì¡°íšŒ
    b := store.Get(GetPostIDBytes(id))
    // ì¡°íšŒëœ ê²Œì‹œë¬¼ì´ ì—†ì„ ê²½ìš°
    if b == nil {
        return val, false
    }
    // ì¡°íšŒëœ ê²Œì‹œë¬¼ì´ ìˆì„ ê²½ìš° ë””ì½”ë”© í›„ ë¦¬í„´
    k.cdc.MustUnmarshal(b, &val)
    return val, true
}
```

`GetPost`ëŠ” Contextì™€ ê²€ìƒ‰í•  ê²Œì‹œë¬¼ì˜ IDë¥¼ ë‚˜íƒ€ë‚´ëŠ” uint64 ìœ í˜•ì˜ IDë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.
ê²Œì‹œë¬¼ ê°’ì´ í¬í•¨ëœ type.Post êµ¬ì¡°ì²´ì™€ ê²Œì‹œë¬¼ì´ ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ë°œê²¬ë˜ì—ˆëŠ”ì§€ ì—¬ë¶€ë¥¼ ë‚˜íƒ€ë‚´ëŠ” Boolean ê°’ì„ ë°˜í™˜í•©ë‹ˆë‹¤.

## Setting Post

```go
// x/blog/keeper/post.go
func (k Keeper) SetPost(ctx sdk.Context, post types.Post) {
	// í˜„ì¬ Contextì— ëŒ€í•œ KVStoreë¥¼ ì—´ì–´ì„œ KVStoreAdapter íƒ€ì…ìœ¼ë¡œ ë°˜í™˜
    storeAdapter := runtime.KVStoreAdapter(k.storeService.OpenKVStore(ctx))
    // storeAdapterì™€ PostKey Prefixë¥¼ ì´ìš©í•´ì„œ Storeìƒì„±
    store := prefix.NewStore(storeAdapter, types.KeyPrefix(types.PostKey))
    // ì¸ìˆ˜ë¡œ ë°›ì€ postë¥¼ Byte sliceë¡œ ë³€í™˜
    b := k.cdc.MustMarshal(&post)
    // ë³€í™˜í•œ postë¥¼ storeì— ì €ì¥
    store.Set(GetPostIDBytes(post.Id), b)
}
```

`SetPost`ëŠ” Contextì™€ ê²Œì‹œë¬¼ì— ëŒ€í•œ ì—…ë°ì´íŠ¸ëœ ê°’ì„ í¬í•¨í•˜ëŠ” type.Post êµ¬ì¡°ì²´ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.
ì´ í•¨ìˆ˜ëŠ” ì•„ë¬´ê²ƒë„ ë°˜í™˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.

## Update Post Message

```go
// x/blog/keeper/msg_server_update_post.go
package keeper

import (
    "context"
    "fmt"

    "blog/x/blog/types"

    errorsmod "cosmossdk.io/errors"
    sdk "github.com/cosmos/cosmos-sdk/types"
    sdkerrors "github.com/cosmos/cosmos-sdk/types/errors"
)

func (k msgServer) UpdatePost(goCtx context.Context, msg *types.MsgUpdatePost) (*types.MsgUpdatePostResponse, error) {
	// Go Context -> Cosmos SDK Context
    ctx := sdk.UnwrapSDKContext(goCtx)
    //Post ì¸ìŠ¤í„´ìŠ¤ ìƒì„±
    var post = types.Post{
        Creator: msg.Creator,
        Id:      msg.Id,
        Title:   msg.Title,
        Body:    msg.Body,
    }
    // msg.Idê°€ ì¡´ì¬í•˜ëŠ”ì§€ í™•ì¸
    val, found := k.GetPost(ctx, msg.Id)
    if !found {
        return nil, errorsmod.Wrap(sdkerrors.ErrKeyNotFound, fmt.Sprintf("key %d doesn't exist", msg.Id))
    }
    // msg.Creatorê°€ ê²Œì‹œê¸€ì˜ Creatorê°€ ë§ëŠ”ì§€ í™•ì¸
    if msg.Creator != val.Creator {
        return nil, errorsmod.Wrap(sdkerrors.ErrUnauthorized, "incorrect owner")
    }
    k.SetPost(ctx, post)
    return &types.MsgUpdatePostResponse{}, nil
}
```

`UpdatePost`ëŠ” Contextì™€ MsgUpdatePost ë©”ì‹œì§€ì— ì œê³µëœ ì •ë³´ë¥¼ í†µí•´ í•´ë‹¹ ê²Œì‹œë¬¼ì´ ì¡´ì¬í•˜ëŠ”ì§€, msg.Creatorê°€ ê²Œì‹œê¸€ì˜ ì†Œìœ ìê°€ ë§ëŠ”ì§€ í™•ì¸ í›„ ê²Œì‹œê¸€ì„ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤.

---

# Delete Post

í•´ë‹¹ ì±•í„°ì—ì„œëŠ” ê²Œì‹œê¸€ì„ ì‚­ì œí•˜ëŠ” ë¡œì§ì„ ì•Œì•„ë´…ë‹ˆë‹¤.

## Remove Post

```go
// x/blog/keeper/post.go
func (k Keeper) RemovePost(ctx sdk.Context, id uint64) {
	// í˜„ì¬ Contextì— ëŒ€í•œ KVStoreë¥¼ ì—´ì–´ì„œ KVStoreAdapter íƒ€ì…ìœ¼ë¡œ ë°˜í™˜
    storeAdapter := runtime.KVStoreAdapter(k.storeService.OpenKVStore(ctx))
    // storeAdapterì™€ PostKey Prefixë¥¼ ì´ìš©í•´ì„œ Storeìƒì„±
    store := prefix.NewStore(storeAdapter, types.KeyPrefix(types.PostKey))
    // í•´ë‹¹ ê²Œì‹œê¸€ ì‚­ì œ
    store.Delete(GetPostIDBytes(id))
}
```

`RemovePost`í•¨ìˆ˜ëŠ” Contextì™€ idë¥¼ ì‚¬ìš©í•´ì„œ ì§€ì •ëœ idì™€ ì—°ê²°ëœ key-valueë¥¼ KVStoreì—ì„œ ì‚­ì œí•©ë‹ˆë‹¤.

## Remove Post Message

```go
// x/blog/keeper/msg_server_delete_post.go
package keeper

import (
    "context"
    "fmt"

    "blog/x/blog/types"

    errorsmod "cosmossdk.io/errors"
    sdk "github.com/cosmos/cosmos-sdk/types"
    sdkerrors "github.com/cosmos/cosmos-sdk/types/errors"
)

func (k msgServer) DeletePost(goCtx context.Context, msg *types.MsgDeletePost) (*types.MsgDeletePostResponse, error) {
	// Go Context -> Cosmos SDK Context
    ctx := sdk.UnwrapSDKContext(goCtx)
    // msg.Idë¥¼ ì´ìš©í•´ í•´ë‹¹ ê²Œì‹œê¸€ì´ ìˆëŠ”ì§€ í™•ì¸
    val, found := k.GetPost(ctx, msg.Id)
    // ê²Œì‹œê¸€ì´ ì—†ì„ ê²½ìš°
    if !found {
        return nil, errorsmod.Wrap(sdkerrors.ErrKeyNotFound, fmt.Sprintf("key %d doesn't exist", msg.Id))
    }
    // ê²Œì‹œê¸€ì˜ Creatorì™€ msg.Creatorê°€ ë‹¤ë¥¼ ê²½ìš°
    if msg.Creator != val.Creator {
        return nil, errorsmod.Wrap(sdkerrors.ErrUnauthorized, "incorrect owner")
    }
    // í•´ë‹¹ ê²Œì‹œê¸€ ì‚­ì œ
    k.RemovePost(ctx, msg.Id)
    return &types.MsgDeletePostResponse{}, nil
}
```

`DeletePost`ëŠ” Contextì™€ MsgDeletePost ë©”ì‹œì§€ì— ì œê³µëœ ì •ë³´ë¥¼ í†µí•´ msg.idë¥¼ ì¡°íšŒí•˜ê³  msg.Creatorê°€ í•´ë‹¹ ê²Œì‹œê¸€ì˜ Creatorì¸ì§€ í™•ì¸ í›„ ê²Œì‹œê¸€ì„ ì‚­ì œí•©ë‹ˆë‹¤.

---

# Show a Post

í•´ë‹¹ ì±•í„°ì—ì„œëŠ” ì‚¬ìš©ìê°€ ê³ ìœ  IDë¡œ ê²Œì‹œê¸€ì„ ê²€ìƒ‰í•˜ëŠ” ê¸°ëŠ¥ì„ ì•Œì•„ë´…ë‹ˆë‹¤.

## Show Post

```go
// x/blog/keeper/query_show_post.go
package keeper

import (
    "context"

    "blog/x/blog/types"

    sdk "github.com/cosmos/cosmos-sdk/types"
    sdkerrors "github.com/cosmos/cosmos-sdk/types/errors"
    "google.golang.org/grpc/codes"
    "google.golang.org/grpc/status"
)

func (k Keeper) ShowPost(goCtx context.Context, req *types.QueryShowPostRequest) (*types.QueryShowPostResponse, error) {
	// requestê°€ ì¡´ì¬í•˜ëŠ” ì§€ í™•ì¸
    if req == nil {
        return nil, status.Error(codes.InvalidArgument, "invalid request")
    }
	// Go Context -> Cosmos SDK Context
    ctx := sdk.UnwrapSDKContext(goCtx)
    // request.Idë¥¼ í†µí•´ ê²Œì‹œë¬¼ ê²€ìƒ‰
    post, found := k.GetPost(ctx, req.Id)
    // í•´ë‹¹í•˜ëŠ” ê²Œì‹œë¬¼ì´ ì—†ì„ ê²½ìš°
    if !found {
        return nil, sdkerrors.ErrKeyNotFound
    }

    return &types.QueryShowPostResponse{Post: &post}, nil
}
```

`ShowPost`í•¨ìˆ˜ëŠ” ë¸”ë¡ì²´ì¸ ìƒíƒœì—ì„œ ë‹¨ì¼ ê²Œì‹œë¬¼ì„ ê²€ìƒ‰í•˜ëŠ” ê¸°ëŠ¥ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.

---

# List Posts

í•´ë‹¹ ì±•í„°ì—ì„œëŠ” ì‚¬ìš©ìê°€ ë¸”ë¡ì²´ì¸ ì• í”Œë¦¬ì¼€ì´ì…˜ì— ì €ì¥ëœ ëª¨ë“  ê²Œì‹œë¬¼ì„ ê²€ìƒ‰í•  ìˆ˜ ìˆëŠ” ê¸°ëŠ¥ì„ ì•Œì•„ë´…ë‹ˆë‹¤.

## List Posts

```go
// x/blog/keeper/query_list_post.go
package keeper

import (
    "context"

    "blog/x/blog/types"

    "cosmossdk.io/store/prefix"
    "github.com/cosmos/cosmos-sdk/runtime"
    sdk "github.com/cosmos/cosmos-sdk/types"
    "github.com/cosmos/cosmos-sdk/types/query"
    "google.golang.org/grpc/codes"
    "google.golang.org/grpc/status"
)

func (k Keeper) ListPost(ctx context.Context, req *types.QueryListPostRequest) (*types.QueryListPostResponse, error) {
	// requestê°€ ì¡´ì¬í•˜ëŠ” ì§€ í™•ì¸
    if req == nil {
        return nil, status.Error(codes.InvalidArgument, "invalid request")
    }
	// í˜„ì¬ Contextì— ëŒ€í•œ KVStoreë¥¼ ì—´ì–´ì„œ KVStoreAdapter íƒ€ì…ìœ¼ë¡œ ë°˜í™˜
    storeAdapter := runtime.KVStoreAdapter(k.storeService.OpenKVStore(ctx))
    // storeAdapterì™€ PostKey Prefixë¥¼ ì´ìš©í•´ì„œ Storeìƒì„±
    store := prefix.NewStore(storeAdapter, types.KeyPrefix(types.PostKey))
	// ê²Œì‹œë¬¼ ì €ì¥ì„ ìœ„í•œ slice ì´ˆê¸°í™”
    var posts []types.Post
    // requsetì— í¬í•¨ëœ Paginationì„ ì´ìš©í•´ì„œ ê° ê²Œì‹œë¬¼ ì¡°íšŒ
    pageRes, err := query.Paginate(store, req.Pagination, func(key []byte, value []byte) error {
	    // ê° ê²Œì‹œë¬¼ ì €ì¥ì„ ìœ„í•œ ë³€ìˆ˜ ì´ˆê¸°í™”
        var post types.Post
        // byte sliceë¥¼ ë””ì½”ë”©í•˜ë©°, ë””ì½”ë”© ê³¼ì •ì—ì„œ ì—ëŸ¬ê°€ ë°œìƒí•  ê²½ìš° ì—ëŸ¬ ë°˜í™˜
        if err := k.cdc.Unmarshal(value, &post); err != nil {
            return err
        }
		// posts sliceì— ì¶”ê°€
        posts = append(posts, post)
        return nil
    })
	// ì—ëŸ¬ê°€ ë°œìƒí•  ê²½ìš°
    if err != nil {
        return nil, status.Error(codes.Internal, err.Error())
    }

    return &types.QueryListPostResponse{Post: posts, Pagination: pageRes}, nil
}
```

`ListPost`í•¨ìˆ˜ëŠ” Contextì™€ QueryListPostRequestë¥¼ ì‚¬ìš©í•˜ì—¬ ê²Œì‹œë¬¼ ëª©ë¡ ë° pagination ì •ë³´ë¥¼ ë°˜í™˜í•˜ëŠ” ê¸°ëŠ¥ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.

---

# Execute

ë‹¤ìŒ ëª…ë ¹ì–´ë“¤ì„ ì´ìš©í•´ íƒœìŠ¤íŠ¸ë¥¼ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ê²°ê³¼ëŠ” ì´ì „ ê²Œì‹œê¸€ì²˜ëŸ¼ ì˜ ì‘ë™í•˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### Create a blog post by Alice

```bash
blogd tx blog create-post hello world --from alice --chain-id blog
```

### Show a blog post

```bash
blogd q blog show-post 0
```

### Create a blog post by Bob

```bash
blogd tx blog create-post foo bar --from bob --chain-id blog
```

### List all blog posts with pagination

```bash
blogd q blog list-post
```

### Update a blog post

```bash
blogd tx blog update-post hello cosmos 0 --from alice --chain-id blog
```

```bash
blogd q blog show-post 0
```

### Delete a blog post

```bash
blogd tx blog delete-post 0 --from alice --chain-id blog
```

```bash
blogd q blog list-post
```

### Delete a blog post unsuccessfully

```bash
blogd tx blog delete-post 1 --from alice --chain-id blog
```

---

# Outro

_ì—¬ê¸°ê¹Œì§€ê°€ [**Module Basic:Blog / In depth blog tutorial**](https://docs.ignite.com/guide/blog/intro)ì— ëŒ€í•œ ë‚´ìš© ì‹¤ìŠµ ë° ì •ë¦¬ ê¸€ì…ë‹ˆë‹¤._

_ì‚¬ì‹¤ ì €ì˜ ì–•ì€ Golangìœ¼ë¡œëŠ” ì´í•´í•˜ëŠ”ë° ì–´ë ¤ì›€ì´ ì¡°ê¸ˆ ìˆì—ˆê³ ,_

_ê·¸ë˜ì„œ ì½”ë“œ í•œì¤„ í•œì¤„ ì´í•´í•˜ë©´ì„œ ì£¼ì„ì„ ë‹¤ëŠë¼ ì‹œê°„ì´ ë§ì´ ê±¸ë ¸ìŠµë‹ˆë‹¤._ ğŸ¥²ğŸ¥²

_ë‹¤ìŒ ê¸€ì€ ì‹œê°„ì´ ë” ê±¸ë¦´ ê²ƒ ê°™ê¸´ í•œë° ëˆ„êµ°ê°€ê°€ ì´ ê¸€ì„ ë³´ê³  ì´í•´í•˜ëŠ”ë° ë„ì›€ì´ ë˜ì—ˆìœ¼ë©´ ì¢‹ê² ìŠµë‹ˆë‹¤._ ğŸ˜€

---

### Reference

- [Ignite CLI](https://docs.ignite.com/)
