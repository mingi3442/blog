---
title: 'CosmosSDK Testnet êµ¬ì„± íŠ¸ëŸ¬ë¸”ìŠˆíŒ…'
date: '2025-04-09'
lastmod: '2025-04-09'
tags: ['Validator', 'COSMOS-SDK', 'Trouble-shooting']
draft: false
summary: 'Cosmos SDKë¥¼ ì´ìš©í•œ ì»¤ìŠ¤í…€ ë„¤íŠ¸ì›Œí¬ í”„ë¡œì íŠ¸ì˜ í…ŒìŠ¤íŠ¸ ë„·ì„ êµ¬ì„±í•˜ëŠ” ê³¼ì •ì—ì„œ ë°œìƒí•œ íŠ¸ëŸ¬ë¸” ìŠˆíŒ…ë“¤ê³¼ í•´ê²°ê³¼ì •ì„ ì •ë¦¬í•´ ë³´ì•˜ìŠµë‹ˆë‹¤.'
images: ['/static/images/thumbnail/cosmos.png']
canonicalUrl: 'https://min71.dev/posts/opstra-trouble-shooting/'
---

# Troubleshooting Cosmos SDK Testnet Setup

![cosmos](/static/images/thumbnail/cosmos.png)

## Intro

í˜„ì¬ íšŒì‚¬ì—ì„œ Cosmos ê¸°ë°˜ì˜ ë¸”ë¡ì²´ì¸ ë…¸ë“œ ê°œë°œì„ ì§„í–‰ì¤‘ì…ë‹ˆë‹¤.
í•´ë‹¹ í”„ë¡œì íŠ¸ê°€ ì‹œì‘í•œì§€ ì˜¤ë˜ ë˜ì§€ëŠ” ì•Šì•„ì„œ, ë¨¼ì € ì‚¬ë‚´ PCë¥¼ í†µí•´ í…ŒìŠ¤íŠ¸ ë„¤íŠ¸ì›Œí¬ë¥¼ êµ¬ì„±í•˜ë˜ ì¤‘ ë°œìƒí•œ íŠ¸ëŸ¬ë¸” ìŠˆíŒ…ì— ëŒ€í•´ì„œ ì‘ì„±í•œ ê¸€ì…ë‹ˆë‹¤.
ê° 6ê°œì˜ PCëŠ” ì•„ë˜ì™€ ê°™ì€ ë…¸ë“œë¡œ êµ¬ì„±í•  ì˜ˆì •ì´ì—ˆìŠµë‹ˆë‹¤.

![node-role](/static/images/opstra/node-role.png)

## DeliverTx Panic: ì œë„¤ì‹œìŠ¤ ê²€ì¦ ì˜¤ë¥˜

Cosmos ê¸°ë°˜ì˜ ì»¤ìŠ¤í…€ ë„¤íŠ¸ì›Œí¬ë¥¼ êµ¬ì„±ì¤‘ ê° ë²¨ë¦¬ë°ì´í„° ë…¸ë“œë¡œë¶€í„° `genTx()`ë¥¼ ìƒì„± í›„ ìˆ˜ì§‘í•˜ì—¬ ì²« ë²ˆì§¸ ë…¸ë“œì—ì„œ `genesis collect`ë¥¼ í†µí•´ `genesis.json`ì„ ë§Œë“¤ì—ˆê³ , ì´í›„ ë…¸ë“œë¥¼ ì‹œì‘í• ë•Œ ì•„ë˜ì™€ ê°™ì€ `DeliverTx` ê´€ë ¨ `Panic Error`ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.

```bash
panic: failed to execute DeliverTx for '{"body":{"messages":[{"@type":"/cosmos.staking.v1beta1.MsgCreateValidator","description":{"moniker":"opusm-2","identity":"","website":"","security_contact":"","details":""},"commission":{"rate":"0.100000000000000000","max_rate":"0.200000000000000000","max_change_rate":"0.010000000000000000"},"min_self_delegation":"1","delegator_address":"opstra1dr6w9y3tskvxxkfal83tr0j473znt0gagnungn","validator_address":"opstravaloper1dr6w9y3tskvxxkfal83tr0j473znt0gak8lecq","pubkey":{"@type":"/cosmos.crypto.ed25519.PubKey","key":"3NASVaM3xRIuQEKJzIQAb02qXO/BCru3WkWo/f0/JCE="},"value":{"denom":"uopstra","amount":"1000000"}}],"memo":"5669666560f1ae5721f2c81f6bcd7c9e87bf6db9@192.168.100.59:26656","timeout_height":"0","extension_options":[],"non_critical_extension_options":[]},"auth_info":{"signer_infos":[{"public_key":{"@type":"/cosmos.crypto.secp256k1.PubKey","key":"A+45zJ6Sbqin3pvwvAOioEtz6qcYW1JJqa3QiCd/d7L1"},"mode_info":{"single":{"mode":"SIGN_MODE_DIRECT"}},"sequence":"0"}],"fee":{"amount":[],"gas_limit":"200000","payer":"","granter":""},"tip":null},"signatures":["aJSAtMYugvT2vcG5otNRR/zObdUOrLO7o01C+OmAKQNxw3eNEf2CqDWqv/ULA83hSzOhA4DfpBny7uUp6Hv4Ug=="]}': signature verification failed; please verify account number (0) and chain-id (opstra-testnet-1): (unable to verify single signer signature): unauthorized
```

### ì›ì¸ ë¶„ì„

ì—ëŸ¬ê°€ ë°œìƒí–ˆì„ ë•Œ ì•„ë˜ì™€ ê°™ì€ ì§„í–‰ ë°©ë²•ì„ ì‚¬ìš©í•˜ì˜€ìŠµë‹ˆë‹¤.

1. `genesis.json`ì„ ë²¨ë¦¬ë°ì´í„°ë¥¼ ë‹´ë‹¹í•  1~4 ë²ˆ ë…¸ë“œì—ì„œ ìƒì„± í›„ accountë¥¼ ì¶”ê°€ í•œ ë’¤ `genTx`ë¥¼ ìƒì„±
2. ì´í›„ ê° ë²¨ë¦¬ë…¸ë“œë“¤ì´ ìƒì„±í•œ `genTx`ë¥¼ ëª¨ì•„ì„œ 1ë²ˆ ë…¸ë“œì—ì„œ `genesis collect`ì„ ì´ìš©í•˜ì—¬ ì—…ë°ì´íŠ¸
3. 5,6ë²ˆ ë…¸ë“œ account ì¶”ê°€
4. ì—…ë°ì´íŠ¸ ëœ `genesis.json`ì„ ê° ë…¸ë“œì— ê³µìœ 

ìœ„ì™€ ê°™ì€ ë°©ë²•ìœ¼ë¡œ ì§„í–‰ í•˜ë‹¤ë³´ë‹ˆ 1ë²ˆ ë…¸ë“œì˜ `genesis.json`ì—ëŠ” ë‹¤ë¥¸ 2~4ë²ˆ ë…¸ë“œë“¤ì˜ account ë° token í• ë‹¹ì´ ë˜ì§€ ì•Šì•˜ê¸° ë•Œë¬¸ì— ìœ„ì™€ ê°™ì´ `DeliverTx`ê°€ ì‹¤íŒ¨í•œ ê²ƒìœ¼ë¡œ ì¶”ì¸¡ë©ë‹ˆë‹¤.

## ì œë„¤ì‹œìŠ¤ ìƒì„± ë°©ì‹ ê°œì„ : ê³„ì • ì¶”ê°€ ëˆ„ë½ ë°©ì§€

ì´ë²ˆì—ëŠ” ë‹¤ìŒê³¼ ê°™ì€ ìˆœì„œë¡œ ì§„í–‰í–ˆìŠµë‹ˆë‹¤.

1. 1ë²ˆ ë…¸ë“œì—ì„œ `init`ì„ í†µí•´ `genesis.json`ì„ ë‹¤ì‹œ ìƒì„±
2. 1ë²ˆ ë…¸ë“œì—ì„œ ë‹¤ë¥¸ ë…¸ë“œë“¤ì˜ account ë° token í• ë‹¹ ì´í›„ í•´ë‹¹ `genesis.json`ì„ ê³µìœ 
3. ê° ê³µìœ  ë°›ì€ ë…¸ë“œë“¤ ì¤‘ ë²¨ë¦¬ë°ì´í„° Roleì„ ê°€ì§„ ë…¸ë“œë“¤ì€ `genTx`ë¥¼ ìƒì„±
4. `genTx`ë¥¼ ìƒì„±í•œ ê° ë…¸ë“œë“¤ì€ 1ë²ˆ ë…¸ë“œì—ê²Œ ê³µìœ 
5. 1ë²ˆ ë…¸ë“œì—ì„œ `genTx`ë¥¼ í•©ì³ `genesis.json`ì„ ì—…ë°ì´íŠ¸ í•œ ë’¤ ê° ë…¸ë“œì— ê³µìœ 

ë°©ë²•ì´ ë” ê¸¸ì–´ì¡Œì§€ë§Œ ì—¬ì „íˆ ë‹¤ìŒê³¼ ê°™ì€ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.

```bash
panic: failed to execute DeliverTx for '{"body":{"messages":[{"@type":"/cosmos.staking.v1beta1.MsgCreateValidator","description":{"moniker":"opusm-2","identity":"","website":"","security_contact":"","details":""},"commission":{"rate":"0.100000000000000000","max_rate":"0.200000000000000000","max_change_rate":"0.010000000000000000"},"min_self_delegation":"1","delegator_address":"opstra1dr6w9y3tskvxxkfal83tr0j473znt0gagnungn","validator_address":"opstravaloper1dr6w9y3tskvxxkfal83tr0j473znt0gak8lecq","pubkey":{"@type":"/cosmos.crypto.ed25519.PubKey","key":"3NASVaM3xRIuQEKJzIQAb02qXO/BCru3WkWo/f0/JCE="},"value":{"denom":"uopstra","amount":"1000000"}}],"memo":"5669666560f1ae5721f2c81f6bcd7c9e87bf6db9@192.168.100.59:26656","timeout_height":"0","extension_options":[],"non_critical_extension_options":[]},"auth_info":{"signer_infos":[{"public_key":{"@type":"/cosmos.crypto.secp256k1.PubKey","key":"A+45zJ6Sbqin3pvwvAOioEtz6qcYW1JJqa3QiCd/d7L1"},"mode_info":{"single":{"mode":"SIGN_MODE_DIRECT"}},"sequence":"0"}],"fee":{"amount":[],"gas_limit":"200000","payer":"","granter":""},"tip":null},"signatures":["aJSAtMYugvT2vcG5otNRR/zObdUOrLO7o01C+OmAKQNxw3eNEf2CqDWqv/ULA83hSzOhA4DfpBny7uUp6Hv4Ug=="]}': signature verification failed; please verify account number (0) and chain-id (opstra-testnet-1): (unable to verify single signer signature): unauthorized
```

### ì›ì¸ ë¶„ì„

ë‹¤ë¥¸ ì˜¤ë¥˜ê°€ ì•„ë‹Œ ê°™ì€ ì˜¤ë¥˜ê°€ ë°œìƒí•˜ë¯€ë¡œ, `.opstrad/data` ë‚´ë¶€ì— ìˆëŠ” ì´ì „ ë°ì´í„°ë“¤ë¡œ ì¸í•œ ì˜¤ë¥˜ë¡œ ì¶”ì¸¡ë©ë‹ˆë‹¤.

## ë°ì´í„° ë””ë ‰í† ë¦¬ ì´ˆê¸°í™”: ì˜¤ë¥˜ ë©”ì‹œì§€ ë³€í™”

ì¶”ì¸¡í•œ ì›ì¸ì„ ê·¼ê±°ë¡œ `.opstrad/data`ë‚´ë¶€ì— ìˆëŠ” `priv_validator_state.json`ì„ ì´ˆê¸°í™” ë° `priv_validator_state.json`ì„ ì œì™¸í•œ ë°ì´í„°ë“¤ì„ ëª¨ë‘ ì‚­ì œ í›„ ë‹¤ì‹œ ì‹¤í–‰í–ˆìŠµë‹ˆë‹¤.
ì´í›„ ì˜¤ë¥˜ ë©”ì‹œì§€ê°€ ì•„ë˜ì™€ ê°™ì´ ë³€ê²½ëœ ê²ƒì„ í™•ì¸í–ˆìŠµë‹ˆë‹¤.

```bash
failed to execute message; message index: 0: invalid coin denomination: got uopstra, expected stake: invalid request
```

### ì›ì¸ ë¶„ì„

ë„¤íŠ¸ì›Œí¬ì˜ denomì€ `uopstra`ë¡œ ì„¤ì • í–ˆì—ˆê³ , token í• ë‹¹ ë° `genTx`ì—ì„œë„ validator ë“±ë¡ì„ ìœ„í•œ denomì„ `uopstra`ë¡œ í–ˆì—ˆëŠ”ë° `stake`ë¼ëŠ” ë‹¨ìœ„ë¥¼ ê¸°ëŒ€í•œë‹¤ëŠ” ê²ƒì„ ë³´ì•„ `genesis.json` í˜¹ì€ ì½”ë“œ ìƒì˜ ë¬¸ì œë¡œ ì¶”ì¸¡ë©ë‹ˆë‹¤.

## bond_denomÂ ìˆ˜ì •: staking ì˜¤ë¥˜ í•´ê²°

ë¨¼ì € `genesis.json`ì„ ë‹¤ì‹œ í™•ì¸ í•´ë³´ì•˜ìŠµë‹ˆë‹¤.

```json
 "staking": {
      "params": {
        "unbonding_time": "1814400s",
        "max_validators": 100,
        "max_entries": 7,
        "historical_entries": 10000,
        "bond_denom": "stake",
        "min_commission_rate": "0.000000000000000000"
      },
      "last_total_power": "0",
      "last_validator_powers": [],
      "validators": [],
      "delegations": [],
      "unbonding_delegations": [],
      "redelegations": [],
      "exported": false
 }
```

ìœ„ì²˜ëŸ¼ `app_state.staking.params.bond_denom`ì— `stake`ë¡œ ë˜ì–´ ìˆì—ˆê¸° ë•Œë¬¸ì— ëª¨ë“  ë…¸ë“œì˜ `genesis.json`ì—ì„œ `stake`ë¥¼ `uopstra`ë¡œ ë³€ê²½í–ˆìŠµë‹ˆë‹¤.

### ì›ì¸ ë¶„ì„

ì´ëŠ” ì œê°€ ìµœì´ˆì˜ `init`ì‹œì— `--default-denom`ì„ ì„¤ì •í•˜ì§€ ì•Šì•„ì„œ ë°œìƒí•œ ë¬¸ì œë¡œ í™•ì¸ ë©ë‹ˆë‹¤.
![init-flag](/static/images/opstra/init-flag.png)

## P2P ì—°ê²° ì‹¤íŒ¨: ë°©í™”ë²½ ì„¤ì • í™•ì¸

ì´í›„ ê° ë…¸ë“œë“¤ì´ ì˜ ì‹¤í–‰ ë˜ê³  ìˆì—ˆìœ¼ë‚˜, ì•„ë˜ì™€ ê°™ì´ p2pì—°ê²°ì´ ì•ˆë˜ëŠ” ê²ƒì„ í™•ì¸í–ˆìŠµë‹ˆë‹¤.
![p2p-error](/static/images/opstra/p2p-error.png)

### ì›ì¸ ë¶„ì„

ì›ì¸ì„ ì°¾ì•„ë³´ë‹ˆ ê° ë…¸ë“œë“¤ì˜ p2pë¥¼ ìœ„í•´ ì„¤ì •ë˜ì–´ ìˆë˜ 26656ë²ˆ í¬íŠ¸ê°€ ë°©í™”ë²½ì„¤ì •ì„ í•˜ë©´ì„œ ë‹«ì•„ì ¸ìˆì—ˆê³ , ì•„ë˜ ëª…ë ¹ì–´ë¥¼ í†µí•´ í•´ë‹¹ í¬íŠ¸ë¥¼ ì—° ë’¤ ì •ìƒ ì ìœ¼ë¡œ ì—°ê²°ë˜ëŠ” ê²ƒì„ í™•ì¸ í–ˆìŠµë‹ˆë‹¤.

```bash
sudo ufw allow 26656/tcp   # P2P Config Port
```

```bash
curl -sS http://127.0.0.1:26657/net_info | jq | egrep "n_peers|moniker|is_outbound"
    "n_peers": "4",
          "moniker": "opusm-3",
        "is_outbound": false,
          "moniker": "opusm-4",
        "is_outbound": false,
          "moniker": "opusm-5",
        "is_outbound": false,
          "moniker": "opusm-2",
        "is_outbound": false,
```

## Outro

Cosmos SDK ê¸°ë°˜ì˜ ì»¤ìŠ¤í…€ ë„¤íŠ¸ì›Œí¬ë¥¼ ì²˜ìŒë¶€í„° ì§ì ‘ êµ¬ì„±í•´ë³´ë©´ì„œ, ë¬¸ì„œë¡œëŠ” ì‰½ê²Œ ì§€ë‚˜ì³¤ë˜ ë¶€ë¶„ë“¤ì´ ì‹¤ì œ ìš´ì˜ í™˜ê²½ì—ì„œëŠ” ì–¼ë§ˆë‚˜ ì¤‘ìš”í•œ ë³€ìˆ˜ë¡œ ì‘ìš©í•˜ëŠ”ì§€ ì²´ê°í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.

íŠ¹íˆë‚˜ ì´ë²ˆ íŠ¸ëŸ¬ë¸” ìŠˆíŒ…ì—ì„œ ì²´ê°í•œ ê²ƒì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.

- **ì²´ì¸ì˜ Genesis ì„¸íŒ…**: `genesis.json`ì˜ `genTx`ë¥¼ ì–´ë–¤ ìˆœì„œë¡œ ìŒ“ì•„ê°€ëŠ”ì§€ì— ëŒ€í•œ ë…¼ë¦¬ì ì¸ íë¦„ì— ëŒ€í•´ ê³ ë¯¼í•˜ê³  ì•Œê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.
- **Genesisì™€ `/data`**: ë…¸ë“œëŠ” ê¸°ë™ ì‹œì ì— genesis.jsonì´ ì•„ë‹Œ, ì´ë¯¸ ë¡œì»¬ì— ì €ì¥ëœ data ë””ë ‰í† ë¦¬ì˜ ìƒíƒœê°€ ì¡´ì¬í•  ê²½ìš° ì´ë¥¼ ì²´ì¸ì˜ ê¸°ì¤€ ë°ì´í„°ë¡œ ê°„ì£¼í•˜ê³ , ì´í›„ì˜ ë¸”ë¡ ìœ íš¨ì„± ë° í•©ì˜ ì ˆì°¨ë¥¼ ì´ì— ê¸°ë°˜í•´ ê²€ì¦í•œë‹¤ëŠ” êµ¬ì¡°ì  íŠ¹ì„±ì„ ì‹¤ê°í–ˆìŠµë‹ˆë‹¤.
- **P2P í†µì‹  ì˜¤ë¥˜**: ë…¸ë“œ ê°„ ì—°ê²°ì´ ë˜ì§€ ì•Šì„ ë•ŒëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ ë ˆë²¨ë³´ë‹¤ ë¨¼ì €, í¬íŠ¸ ì—´ë¦¼ ìƒíƒœ, ë°©í™”ë²½ ì •ì±…, IP ì ‘ê·¼ì„± ë“±ì„ ì ê²€í•˜ëŠ” ê²ƒì´ ìµœìš°ì„ ì´ë©°, ì´ ê³¼ì •ì—ì„œ 26657ì€ RPC í†µì‹ ìš©, 1317ì€ REST API, 9090ì€ gRPC ë“± Cosmos ë…¸ë“œì—ì„œ ì‚¬ìš©í•˜ëŠ” í¬íŠ¸ë“¤ì˜ ê¸°ë³¸ê°’ê³¼ ìš©ë„ë¥¼ ëª…í™•íˆ ì´í•´í•˜ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.
- **init ëª…ë ¹ì–´ì˜ í”Œë˜ê·¸ ì„¤ì •**: ì²´ì¸ ID, ê¸°ë³¸ denom ë“±ì€ ìµœì´ˆ init ì‹œì— ëª…í™•íˆ ì„¤ì •í•´ì•¼ í•˜ë©°, ì´ë¥¼ ëª…ì‹œí•˜ì§€ ì•Šì„ ê²½ìš° genesis.jsonì˜ ê¸°ë³¸ íŒŒë¼ë¯¸í„°(ì˜ˆ: bond_denom)ê°€ ì˜ë„ì¹˜ ì•Šê²Œ ì„¤ì •ë˜ì–´ ì´í›„ validator ë“±ë¡ì´ë‚˜ staking ë‹¨ê³„ì—ì„œ ì˜¤ë¥˜ë¡œ ì´ì–´ì§€ëŠ” ì‚¬ë¡€ì— ëŒ€í•´ ì¶©ë¶„íˆ ì‹¤ê°í–ˆìŠµë‹ˆë‹¤.
- **Staking denom**: ë„¤íŠ¸ì›Œí¬ì—ì„œ ì‚¬ìš©ë  staking í† í° ë‹¨ìœ„ëŠ” genesis.json ë‚´ `staking.params.bond_denom`ì—ì„œ ì •ì˜ë˜ë©°, ì´ëŠ” í† í° ë¶„ë°° ë° validator ë“±ë¡ê³¼ ê¸´ë°€íˆ ì—°ê²°ë˜ê¸° ë•Œë¬¸ì— ì¼ê´€ë˜ê²Œ ì„¤ì •ë˜ì§€ ì•Šìœ¼ë©´ íŠ¸ëœì­ì…˜ ì‹¤íŒ¨ë¡œ ì´ì–´ì§ˆ ìˆ˜ ìˆìŒì„ ëª…í™•íˆ ì´í•´í•˜ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.

ê²°ë¡ ì ìœ¼ë¡œ, ë‹¨ìˆœíˆ ë…¸ë“œë¥¼ ë„ìš°ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ **ì²´ì¸ ì „ì²´ ìƒíƒœë¥¼ ì¼ê´€ë˜ê²Œ ì„¤ê³„í•˜ê³  ê´€ë¦¬**í•˜ëŠ” ê²ƒì´ ë„¤íŠ¸ì›Œí¬ êµ¬ì„±ì—ì„œ ì œì¼ ì¤‘ìš”í•œ ë¶€ë¶„ì´ë¼ëŠ” ìƒê°ì´ ë“¤ì—ˆìŠµë‹ˆë‹¤.

ì´ë²ˆ íŠ¸ëŸ¬ë¸”ìŠˆíŒ…ì€ ì‘ì€ í…ŒìŠ¤íŠ¸ í™˜ê²½ì—ì„œì˜ ê²½í—˜ì´ì—ˆì§€ë§Œ, ì‹¤ì œ ìš´ì˜ ì´ì „ì— ê¼­ í•œ ë²ˆì€ ê²ªê³  ë„˜ì–´ê°€ì•¼ í•  ì¤‘ìš”í•œ ê³¼ì •ì´ë¼ê³  ìƒê°í•©ë‹ˆë‹¤.

ì´ë²ˆ ê¸°ë¡ì´ ì €í¬ íŒ€ë¿ë§Œ ì•„ë‹ˆë¼ Cosmos SDK ê¸°ë°˜ì˜ ë¸”ë¡ì²´ì¸ì„ ì²˜ìŒ ì„¸íŒ…í•˜ëŠ” ë‹¤ë¥¸ ê°œë°œìë“¤ì—ê²Œë„ ì‘ì€ ë„ì›€ì´ ë˜ê¸¸ ë°”ëë‹ˆë‹¤. ğŸ™‚
